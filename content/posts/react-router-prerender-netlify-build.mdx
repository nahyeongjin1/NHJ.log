---
title: 'React Router v7 Pre-render + Netlify í˜¸í™˜ ì´ìŠˆ í•´ê²° ê³¼ì •'
excerpt: 'React Router v7ì˜ prerender ê¸°ëŠ¥ì´ Netlifyì—ì„œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ì›ì¸ì„ íŒŒì•…í•˜ê³  ì˜¤í”ˆì†ŒìŠ¤ì— ê¸°ì—¬í•œ ê²½í—˜'
createdAt: '2025-12-29T03:01:00.000Z'
updatedAt: '2025-12-29T06:34:00.000Z'
tags: ['React Router v7', 'Netlify', 'Vite', 'Open Source', 'SSG']
thumbnail: 'https://pub-ee38f5a9ca244fbb9948d2fb7fe576bd.r2.dev/images/posts/2d8bdc82-a936-80d5-a9ea-cd644158618f/thumbnail.png'
---

## TL;DR

---

<Callout icon="ğŸ’¡">
1. React Router v7ì˜ prerender ê¸°ëŠ¥ì´ Netlify í™˜ê²½ì—ì„œ "Server build file not found" ì—ëŸ¬ë¡œ ì‹¤íŒ¨

1. ì›ì¸: Netlify í”ŒëŸ¬ê·¸ì¸ì´ rollupOptions.inputì„ ë®ì–´ì¨ì„œ server-buildê°€ manifestì—ì„œ ì œì™¸ë¨

1. í•´ê²°: enforce: 'post' í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ìš°íšŒ í›„, ê·¼ë³¸ ìˆ˜ì •ì„ ìœ„í•´ Netlify í”ŒëŸ¬ê·¸ì¸ì— PR ì œì¶œ
</Callout>

## ë°°ê²½: Pre-rendering(SSG)ë€?

---

ë¹Œë“œ ì‹œì ì— íŠ¹ì • ë¼ìš°íŠ¸ë¥¼ ë¯¸ë¦¬ HTMLë¡œ ìƒì„±í•´ë‘ëŠ” ê²ƒ.

```text
ìš”ì²­ â†’ ì´ë¯¸ ìƒì„±ëœ HTML ë°˜í™˜ (SSR ë¶ˆí•„ìš”, CDNì—ì„œ ë°”ë¡œ ì„œë¹™)
```

## ë¬¸ì œ ë¶„ì„

---

React Routerì˜ prerenderëŠ” **ë‹¨ìˆœí•œ ì¼€ì´ìŠ¤**ë¥¼ ìœ„í•´ ì„¤ê³„ë¨:

```text
[ì¼ë°˜ì ì¸ êµ¬ì¡°]
vite build â†’ server-build ìƒì„± â†’ prerenderê°€ server-build ë¡œë“œ â†’ HTML ìƒì„±
```

í•˜ì§€ë§Œ **ì»¤ìŠ¤í…€ ì„œë²„** (Vercel Functions, Netlify Functions ë“±)ë¥¼ ì“°ë©´:

```text
[ì»¤ìŠ¤í…€ ì„œë²„ êµ¬ì¡°]
vite build â†’ server-build ìƒì„±
           â†’ custom server entry ìƒì„±

prerenderëŠ” server-buildë§Œ ë¡œë“œ â†’ custom server entry ë¬´ì‹œë¨!
```

ì´ë¡œ ì¸í•´ React Router v7ì˜ `prerender` ê¸°ëŠ¥ì´ Netlify, Cloudflare, Vercel ë“± 3rd party ì„œë²„ë¦¬ìŠ¤ í”Œë«í¼ í”ŒëŸ¬ê·¸ì¸ê³¼ í˜¸í™˜ë˜ì§€ ì•ŠìŒ.

### ì¦ìƒ

```text
[react-router] Server build file not found in manifest
```

### ì›ì¸

í”Œë«í¼ í”ŒëŸ¬ê·¸ì¸ë“¤ì´ ì„œë²„ ë¹Œë“œ ì¶œë ¥ì„ ìˆ˜ì •í•˜ì—¬ React Routerì˜ prerender í”„ë¡œì„¸ìŠ¤ê°€ manifestì—ì„œ ì„œë²„ ë¹Œë“œ íŒŒì¼ì„ ì°¾ì§€ ëª»í•¨.

**Netlify í”ŒëŸ¬ê·¸ì¸ì˜ ê²½ìš°:**

`@netlify/vite-plugin-react-router`ê°€ `config` í›…ì—ì„œ `rollupOptions.input`ì„ **ë®ì–´ì“°ê¸°**í•¨:

```typescript
// node_modules/@netlify/vite-plugin-react-router/dist/index.js
config.build.rollupOptions.input = {
  server: "virtual:netlify-server"
};
```

ì´ë¡œ ì¸í•´ `virtual:react-router/server-build`ê°€ manifestì—ì„œ ì œì™¸ë¨.

## í•´ê²° ê³¼ì •

---

### ì‹œë„ 1: ê¸°ì¡´ Workaround (ì‹¤íŒ¨)

https://github.com/remix-run/react-router/issues/13226 ì—ì„œ ì œì‹œëœ workaround:

```typescript
export default defineConfig(({ isSsrBuild }) => ({
  build: {
    rollupOptions: isSsrBuild
      ? { input: ['virtual:react-router/server-build'] }
      : undefined,
  },
}));
```

Netlify í™˜ê²½ì—ì„œëŠ” í”ŒëŸ¬ê·¸ì¸ì´ ì´ ì„¤ì •ì„ ë®ì–´ì“°ê¸° ë•Œë¬¸ì— ë™ì¼í•œ ì—ëŸ¬ ë°œìƒ.

### ì‹œë„ 2: enforce: 'post' í”ŒëŸ¬ê·¸ì¸ (ì„±ê³µ)

`enforce: 'post'`ë¥¼ ì‚¬ìš©í•´ Netlify í”ŒëŸ¬ê·¸ì¸ **ì´í›„ì—** `server-build`ë¥¼ inputì— ì¶”ê°€:

```typescript
// vite.config.ts
import { reactRouter } from '@react-router/dev/vite';
import { defineConfig } from 'vite';
import tsconfigPaths from 'vite-tsconfig-paths';
import netlifyReactRouter from '@netlify/vite-plugin-react-router';
import netlify from '@netlify/vite-plugin';

export default defineConfig({
  plugins: [
    reactRouter(),
    tsconfigPaths(),
    netlifyReactRouter(),
    netlify(),

    // Prerender fix: server-buildë¥¼ rollup inputì— ì¶”ê°€
    {
      name: 'add-server-build-to-input',
      enforce: 'post',
      config(config, { command, isSsrBuild }) {
        if (isSsrBuild && command === 'build') {
          const currentInput = config.build?.rollupOptions?.input;
          if (currentInput && typeof currentInput === 'object') {
            return {
              build: {
                rollupOptions: {
                  input: {
                    ...currentInput,
                    'server-build': 'virtual:react-router/server-build',
                  },
                },
              },
            };
          }
        }
      },
    },
  ],
});
```

**ê²°ê³¼:**

```text
build/server/server.js                         0.35 kB
build/server/assets/server-build-lv_U4l46.js  14.57 kB  â† ì¶”ê°€ë¨!

Prerender (html): / -> build/client/index.html
âœ“ built in 292ms
```

### ì‹œë„ 3: ê·¼ë³¸ í•´ê²° - PR ê¸°ì—¬

ê·¼ë³¸ì ì¸ í•´ê²°ì„ ìœ„í•´ `@netlify/vite-plugin-react-router`ì— PR ì œì¶œ:

- **Issue**: https://github.com/netlify/remix-compute/issues/606

- **PR**: https://github.com/netlify/remix-compute/pull/607

í”ŒëŸ¬ê·¸ì¸ì´ ê¸°ì¡´ inputì„ ë®ì–´ì“°ì§€ ì•Šê³  **ë³‘í•©**í•˜ë„ë¡ ìˆ˜ì •:

```typescript
// Before (ë¬¸ì œ)
config.build.rollupOptions.input = {
  server: "virtual:netlify-server"
};

// After (ìˆ˜ì •)
const existingInput = config.build?.rollupOptions?.input;
// ... ê¸°ì¡´ input í˜•íƒœì— ë”°ë¼ ë³‘í•© ì²˜ë¦¬
config.build.rollupOptions.input = {
  ...mergedInput,
  server: "virtual:netlify-server",
};

```

> í–¥í›„ React Router íŒ€ì—ì„œ Vite Preview Server ë°©ì‹ìœ¼ë¡œ ê³µì‹ ì§€ì› ì˜ˆì • ([RFC #14651](https://github.com/remix-run/react-router/discussions/14651))

## ê´€ë ¨ ìë£Œ

---

### ì´ìŠˆ & PR

| ë§í¬ | ì„¤ëª… |
| --- | --- |
| [#13226](https://github.com/remix-run/react-router/issues/13226) | Cloudflare Workers ë™ì¼ ì´ìŠˆ |
| [#14096](https://github.com/remix-run/react-router/issues/14096) | Netlify ì´ìŠˆ (closed as not planned) |
| [Discussion #14651](https://github.com/remix-run/react-router/discussions/14651) | Vite Preview Server RFC |
| [PR #14650](https://github.com/remix-run/react-router/pull/14650) | Preview Server êµ¬í˜„ (ë¦¬ë·° ëŒ€ê¸°) |
| [Netlify #606](https://github.com/netlify/remix-compute/issues/606) | Netlify í”ŒëŸ¬ê·¸ì¸ ì´ìŠˆ |
| [Netlify #607](https://github.com/netlify/remix-compute/pull/607) | Netlify í”ŒëŸ¬ê·¸ì¸ ìˆ˜ì • PR |
